#:kivy 2.1.0

<MenuScreen>:
    shuffler: wowshuffler

    WoWShuffler:
        id: wowshuffler
        orientation: 'vertical'
        padding: 20
        Label:
            text: root.heading.text
            font_size: 40
        GridLayout:
            cols: 2
            rows: 2
            Button:
                text: str('a)')
                font_size: 25
                size_hint_x: 0.5
                text_size: self.size
                valign: 'center'
                halign: 'center'
                on_press: self.parent.parent.mode == 'a'
                on_press: root.manager.current = 'shuffling'
            Label:
                text: str('Devout must be unique')
                font_size: 25
            Button:
                text: str('b)')
                font_size: 25
                size_hint_x: 0.5
                text_size: self.size
                valign: 'center'
                halign: 'center'
                on_press: self.parent.parent.mode == 'b'
                on_press: root.manager.current = 'shuffling'
            Label:
                text: str(' Devout and Opposed must be unique')
                font_size: 25

<ShufflingScreen>:
    shuffler: wowshuffler

    WoWShuffler:
        id: wowshuffler
        orientation: 'vertical'
        padding: 20
        Label:
            text: root.player_label.text
            font_size: 40
        Label:
            text: root.order_label.text
            font_size: 40
        BoxLayout:
            Button:
                text: root.next_player_btn.text
                disabled: True if wowshuffler.current_player_index == 3 else root.next_player_btn.disabled
                on_press: print(wowshuffler.devouts)
                on_press: root.update(f"Current player: {wowshuffler.get_current_player(wowshuffler.players, wowshuffler.current_player_index)}", f"{wowshuffler.get_empires_order(wowshuffler.mode, wowshuffler.empires, wowshuffler.devouts, wowshuffler.opposed, same_player=False)}")
                on_press: wowshuffler.current_player_index += 1
            Button:
                text: 'Shuffle'
                on_press: root.update(f"Current player: {wowshuffler.get_current_player(wowshuffler.players, wowshuffler.current_player_index)}", f"{wowshuffler.get_empires_order(wowshuffler.mode, wowshuffler.empires, wowshuffler.devouts, wowshuffler.opposed)}")
                on_press: root.enable_btn('next_player_btn')
            Button:
                text: 'Back to menu'
                on_press: root.manager.current = 'menu'
                on_press: wowshuffler.reset_properties()


